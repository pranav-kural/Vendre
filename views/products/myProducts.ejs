<% include ../partials/header.ejs %>

<h1><%= title %></h1>

<% if (user) { %>
    <a href="/products/add" class="btn btn-info">Add a New Product</a>


<table class="table table-striped table-hover">
    <tr>
        <th>Name</th><th>Condition</th><th>Price</th><th>Year</th><th>Actions</th>
    </tr>
    

    <% for (var i = 0; i < products.length; i++) { %>

            <tr>
                <td><%= products[i].name %></td>
                <td><%= products[i].condition %></td>
                <td><%= products[i].price %></td>
                <td><%= products[i].year %></td>
                <td>
                    <a href="/products/edit/<%= products[i]._id %>" class="btn btn-success">Edit</a>
                    <a data-href="/products/delete/<%= products[i]._id %>" class="btn btn-danger" data-toggle="modal" data-target="#confirm-delete">Delete</a>
                </td>
            </tr>
            
        <% } %>

</table>

<div id="confirm-delete" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="confirmDeleteLabel">
  <div class="modal-dialog">
    <div class="modal-header">
      Confirm Delete
    </div>
    <div class="modal-body">
      Are you sure you want to delete the product?
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
      <a class="btn btn-danger btn-ok">Delete</a>
    </div>
  </div>
</div>

<% } else { %>
<div class="jumbotron">
    <h1 class="text-primary">You need to be logged in to view your products. Please <a href="/login">Login to your account.</a></h1>
</div>

<% } %>

<% include ../partials/footer.ejs %>